<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Welcome to Ray&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ruibinwong.com/"/>
  <updated>2020-05-18T00:42:48.528Z</updated>
  <id>https://ruibinwong.com/</id>
  
  <author>
    <name>Ray Huang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MSc project research journey - Gradient Boosting Regression 1</title>
    <link href="https://ruibinwong.com/2020/05/18/MSc-project-research-journey-Gradient-Boosting-Regression-1/"/>
    <id>https://ruibinwong.com/2020/05/18/MSc-project-research-journey-Gradient-Boosting-Regression-1/</id>
    <published>2020-05-17T23:26:04.000Z</published>
    <updated>2020-05-18T00:42:48.528Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Gradient-Boosting-Regression-1"><a href="#Gradient-Boosting-Regression-1" class="headerlink" title="Gradient Boosting Regression 1"></a>Gradient Boosting Regression 1</h1><p>Sampling method:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sampling</span><span class="params">(mode=<span class="string">'Kgroup'</span>, k=<span class="number">1</span>)</span>:</span></span><br><span class="line">    train_indexes = []</span><br><span class="line">    <span class="keyword">if</span> mode == <span class="string">'Kgroup'</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">24</span>):</span><br><span class="line">            _2st_indexes = []</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">24</span>):</span><br><span class="line">                _2st_indexes += list(range(<span class="number">24</span> ** <span class="number">3</span>))[j * <span class="number">24</span> ** <span class="number">2</span> + i * <span class="number">24</span>: j * <span class="number">24</span> ** <span class="number">2</span> + (i + <span class="number">1</span>) * <span class="number">24</span>:]</span><br><span class="line"></span><br><span class="line">            train_indexes += random.sample(list(range(<span class="number">24</span> ** <span class="number">3</span>))[i::<span class="number">24</span>], k=k)  <span class="comment"># 3rd gene sampling</span></span><br><span class="line">            train_indexes += random.sample(_2st_indexes, k=k)  <span class="comment"># 2nd gene sampling</span></span><br><span class="line">            train_indexes += random.sample(list(range(<span class="number">24</span> ** <span class="number">3</span>))[i * (<span class="number">24</span> ** <span class="number">2</span>):(i + <span class="number">1</span>) *  (<span class="number">24</span> ** <span class="number">2</span>)],k=k)  <span class="comment"># 1st gene sampling</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        train_indexes = random.sample(list(range(<span class="number">24</span>**<span class="number">3</span>)), k=<span class="number">24</span>*<span class="number">3</span>*k)</span><br><span class="line"></span><br><span class="line">    train_indexes = set(train_indexes)</span><br><span class="line">    test_indexes = set(list(range(<span class="number">24</span> ** <span class="number">3</span>))) - train_indexes</span><br><span class="line">    train_indexes = list(train_indexes)</span><br><span class="line">    test_indexes = list(test_indexes)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> train_indexes, test_indexes</span><br></pre></td></tr></table></figure><p>Training code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(mode, k)</span>:</span></span><br><span class="line">    train_indexes, test_indexes = sampling(mode, k)</span><br><span class="line">    genes = dataprovider.read_genomes(drop_stratigraphy_keys=<span class="literal">True</span>)</span><br><span class="line">    OIP = dataprovider.read_OIP_true()</span><br><span class="line"></span><br><span class="line">    x_train = genes[train_indexes]</span><br><span class="line">    y_train = OIP[train_indexes]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># x_test = genes[test_indexes]</span></span><br><span class="line">    x_test = genes</span><br><span class="line">    <span class="comment"># y_test = OIP[test_indexes]</span></span><br><span class="line">    y_test = OIP</span><br><span class="line">    reg = GradientBoostingRegressor(random_state=<span class="number">0</span>)</span><br><span class="line">    reg.fit(x_train, y_train)</span><br><span class="line">    y_pred = reg.predict(x_test)</span><br><span class="line">    <span class="keyword">return</span> r2_score(y_test, y_pred)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Gradient-Boosting-Regression-1&quot;&gt;&lt;a href=&quot;#Gradient-Boosting-Regression-1&quot; class=&quot;headerlink&quot; title=&quot;Gradient Boosting Regression 1&quot;&gt;
      
    
    </summary>
    
    
    
      <category term="MSc project" scheme="https://ruibinwong.com/tags/MSc-project/"/>
    
  </entry>
  
  <entry>
    <title>MSc project research journey - Gene investigation 1</title>
    <link href="https://ruibinwong.com/2020/05/17/MSc-project-research-journey-Gene-investigation-1/"/>
    <id>https://ruibinwong.com/2020/05/17/MSc-project-research-journey-Gene-investigation-1/</id>
    <published>2020-05-17T13:38:14.000Z</published>
    <updated>2020-05-17T15:48:22.285Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Gene-Investigation-1-Quality-of-Fit"><a href="#Gene-Investigation-1-Quality-of-Fit" class="headerlink" title="Gene Investigation 1 - Quality of Fit"></a>Gene Investigation 1 - Quality of Fit</h1><p>We found the trends of QoF (Quality of Fit) are related with OIP value. </p><p><img src="/2020/05/17/MSc-project-research-journey-Gene-investigation-1/cSwQoF.png" alt="SwQoF"></p><p><img src="/2020/05/17/MSc-project-research-journey-Gene-investigation-1/cNTGQoF.png" alt="SwQoF"></p><p><img src="/2020/05/17/MSc-project-research-journey-Gene-investigation-1/cPhiQoF.png" alt="SwQoF"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Gene-Investigation-1-Quality-of-Fit&quot;&gt;&lt;a href=&quot;#Gene-Investigation-1-Quality-of-Fit&quot; class=&quot;headerlink&quot; title=&quot;Gene Investigation 1 -
      
    
    </summary>
    
    
    
      <category term="MSc project" scheme="https://ruibinwong.com/tags/MSc-project/"/>
    
  </entry>
  
  <entry>
    <title>MSc project research journey - OIP investigation 3</title>
    <link href="https://ruibinwong.com/2020/05/14/MSc-project-research-journey-OIP-investigation-3/"/>
    <id>https://ruibinwong.com/2020/05/14/MSc-project-research-journey-OIP-investigation-3/</id>
    <published>2020-05-14T18:21:55.000Z</published>
    <updated>2020-05-14T22:39:59.931Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OIP-investigation-3"><a href="#OIP-investigation-3" class="headerlink" title="OIP investigation 3"></a>OIP investigation 3</h1><p>The conclusion of <a href="https://ruibinwong.com/2020/05/13/MSc-project-research-journey-OIP-investigation-2/">OIP investigation 2</a> can be more directly to observe when we reorder the model number. </p><p>The model sequence in the data file is ordered like</p><table><thead><tr><th>NTG</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>…</th></tr></thead><tbody><tr><td>Phi</td><td>0</td><td>0</td><td>0</td><td>…</td><td>0</td><td>1</td><td>1</td><td>1</td><td>…</td><td>1</td><td>…</td><td>24</td><td>0</td><td>0</td><td>0</td><td>…</td><td>0</td><td>1</td><td>1</td><td>1</td><td>…</td><td>1</td><td>…</td><td>24</td><td>…</td></tr><tr><td>Sw</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>…</td><td>24</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>…</td><td>24</td><td>…</td></tr></tbody></table><p>and then we have the figure like</p><p><img src="/2020/05/14/MSc-project-research-journey-OIP-investigation-3/ntg.png" alt="OIP fragment"></p><p>Once we reorder the model sequence like </p><table><thead><tr><th>Sw</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>1</th><th>…</th></tr></thead><tbody><tr><td>Phi</td><td>0</td><td>0</td><td>0</td><td>…</td><td>0</td><td>1</td><td>1</td><td>1</td><td>…</td><td>1</td><td>…</td><td>24</td><td>0</td><td>0</td><td>0</td><td>…</td><td>0</td><td>1</td><td>1</td><td>1</td><td>…</td><td>1</td><td>…</td><td>24</td><td>…</td></tr><tr><td>NTG</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>…</td><td>24</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>0</td><td>1</td><td>2</td><td>…</td><td>24</td><td>…</td><td>24</td><td>…</td></tr></tbody></table><p>we will get the figure like</p><p><img src="/2020/05/14/MSc-project-research-journey-OIP-investigation-3/sw.png" alt="OIP fragment"></p><p>This figure would be more clear since the models’ OIP is grouping together and showing the difference of OIP level.</p><p>The OIP curves with Phi genes changing within each Sw gene is showed as the figure below. The different colour curves are the OIP value within different NTG genes.</p><p><img src="/2020/05/14/MSc-project-research-journey-OIP-investigation-3/24SwOIPcurve.png" alt="OIP fragment"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;OIP-investigation-3&quot;&gt;&lt;a href=&quot;#OIP-investigation-3&quot; class=&quot;headerlink&quot; title=&quot;OIP investigation 3&quot;&gt;&lt;/a&gt;OIP investigation 3&lt;/h1&gt;&lt;p&gt;Th
      
    
    </summary>
    
    
    
      <category term="MSc project" scheme="https://ruibinwong.com/tags/MSc-project/"/>
    
  </entry>
  
  <entry>
    <title>MSc project research journey - OIP investigation 2</title>
    <link href="https://ruibinwong.com/2020/05/13/MSc-project-research-journey-OIP-investigation-2/"/>
    <id>https://ruibinwong.com/2020/05/13/MSc-project-research-journey-OIP-investigation-2/</id>
    <published>2020-05-12T23:20:14.000Z</published>
    <updated>2020-05-13T00:56:00.668Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OIP-investigation-2"><a href="#OIP-investigation-2" class="headerlink" title="OIP investigation 2"></a>OIP investigation 2</h1><p>In <a href="https://ruibinwong.com/2020/05/08/MSc-project-research-journey-OIP-investigation-1/">OIP investigation 1</a>, we split the OIP curve to fragments according to the Phi gene. This blog records the insight for discussing the NTG and water saturation affecting the fragments.</p><h2 id="Net-to-Gross-NTG"><a href="#Net-to-Gross-NTG" class="headerlink" title="Net to Gross (NTG)"></a>Net to Gross (NTG)</h2><p>We draw the different colour OIP curve to discriminate NTG genes and conclude that the NTG genes influence the range of OIP values. The figure displays the 24 different colours dots separating vertically as bars, representing the 24 NTG genes. Each bar has different maximum and minimum OIP values but a similar distribution. We, therefore, assume that the NTG gene affects the range of the group of OIP values.</p><p><img src="/2020/05/13/MSc-project-research-journey-OIP-investigation-2/ntg.png" alt="OIP fragment"></p><h2 id="Water-saturation-Sw"><a href="#Water-saturation-Sw" class="headerlink" title="Water saturation (Sw)"></a>Water saturation (Sw)</h2><p>The water saturation mostly affect the OIP value as the figure below showing. The OIP values from the models with the same Sw gene (the same colour) show the approximate consistency.</p><p><img src="/2020/05/13/MSc-project-research-journey-OIP-investigation-2/sw.png" alt="OIP fragment"></p><h2 id="Overall"><a href="#Overall" class="headerlink" title="Overall"></a>Overall</h2><p>In conclusion, we have known the way of model’s genes affecting the OIP values. However, we should not see these insights in the task since, in the scenario, we do not know the OIP value, and we only have the genes. So we should focus on analysing the variables from the genes to see if there is consistency with OIP value. Hopefully, we can get a proper unsupervised grouping metrics from it.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;OIP-investigation-2&quot;&gt;&lt;a href=&quot;#OIP-investigation-2&quot; class=&quot;headerlink&quot; title=&quot;OIP investigation 2&quot;&gt;&lt;/a&gt;OIP investigation 2&lt;/h1&gt;&lt;p&gt;In
      
    
    </summary>
    
    
    
      <category term="MSc project" scheme="https://ruibinwong.com/tags/MSc-project/"/>
    
  </entry>
  
  <entry>
    <title>MSc project research journey - OIP investigation 1</title>
    <link href="https://ruibinwong.com/2020/05/08/MSc-project-research-journey-OIP-investigation-1/"/>
    <id>https://ruibinwong.com/2020/05/08/MSc-project-research-journey-OIP-investigation-1/</id>
    <published>2020-05-08T18:41:16.000Z</published>
    <updated>2020-05-13T00:56:03.863Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OIP-investigation-1"><a href="#OIP-investigation-1" class="headerlink" title="OIP investigation 1"></a>OIP investigation 1</h1><p>We tried to explore the OIP value curve from Phi, NTG and Water Saturation. We found a proper division method that treating the OIP plotted by 24 Phi genes as a fragment, and these fragments could show a similar level of OIP (as the figure showing below).</p><p><img src="/2020/05/08/MSc-project-research-journey-OIP-investigation-1/oip_investigation.png" alt="OIP fragment"></p><p>NTG and Water Saturation decide the positions of fragments on the figure. These positions reflect the different level of OIP, which is what we are expecting. We should do further exploration of NTG and Water Saturation to see how they influence the fragments’ positions. </p><p>Now we can be sure these genes are really affecting the OIP.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;OIP-investigation-1&quot;&gt;&lt;a href=&quot;#OIP-investigation-1&quot; class=&quot;headerlink&quot; title=&quot;OIP investigation 1&quot;&gt;&lt;/a&gt;OIP investigation 1&lt;/h1&gt;&lt;p&gt;We
      
    
    </summary>
    
    
    
      <category term="MSc project" scheme="https://ruibinwong.com/tags/MSc-project/"/>
    
  </entry>
  
</feed>
